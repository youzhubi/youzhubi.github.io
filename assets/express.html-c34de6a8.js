import{_ as e,p as o,q as c,s as n,R as s,t,Z as p,n as i}from"./framework-9675d465.js";const l={},u=n("h2",{id:"_1-expressä»‹ç»",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1-expressä»‹ç»","aria-hidden":"true"},"#"),s(" 1.expressä»‹ç»")],-1),r={href:"https://www.expressjs.com.cn/",target:"_blank",rel:"noopener noreferrer"},k={href:"https://express.nodejs.cn/",target:"_blank",rel:"noopener noreferrer"},d=p(`<p>é€šè¿‡expresså¯ä»¥å¿«é€Ÿçš„åœ¨nodeä¸­æ­å»ºä¸€ä¸ªwebæœåŠ¡å™¨ã€‚</p><blockquote><p>ä½¿ç”¨æ­¥éª¤ï¼š</p><ol><li>åˆ›å»ºå¹¶åˆå§‹åŒ–é¡¹ç›®ï¼šyarn init -y ï¼ˆnpm init -yï¼‰</li><li>å®‰è£…expressï¼šyarn add express ï¼ˆnpm i expressï¼‰</li><li>åˆ›å»ºindex.js å¹¶ç¼–å†™ä»£ç </li></ol></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å¼•å…¥express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// è·å–æœåŠ¡å™¨çš„å®ä¾‹ï¼ˆå¯¹è±¡ï¼‰</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¯åŠ¨æœåŠ¡å™¨</strong> app.listen(ç«¯å£) ç”¨æ¥å¯åŠ¨æœåŠ¡å™¨ã€‚æœåŠ¡å™¨å¯åŠ¨åï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥é€šè¿‡å¯¹åº”çš„ç«¯å£æ¥è®¿é—®äº†ã€‚<strong>åè®®å://ipåœ°å€:ç«¯å£å·//è·¯å¾„</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// http://localhost:3000</span>
<span class="token comment">// http://127.0.0.1:3000</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æœåŠ¡å™¨å·²ç»å¯åŠ¨~&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#_2-è·¯ç”±" aria-hidden="true">#</a> 2.è·¯ç”±</h2><p>å®˜æ–¹å®šä¹‰ï¼š è·¯ç”±ç¡®å®šäº†åº”ç”¨ç¨‹åºå¦‚ä½•å“åº”å®¢æˆ·ç«¯å¯¹ç‰¹å®šç«¯ç‚¹çš„è¯·æ±‚ã€‚</p><h3 id="_2-1è·¯ç”±çš„ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_2-1è·¯ç”±çš„ä½¿ç”¨" aria-hidden="true">#</a> 2.1è·¯ç”±çš„ä½¿ç”¨</h3><p>å¦‚æœå¸Œæœ›æœåŠ¡å™¨å¯ä»¥æ­£å¸¸è®¿é—®ï¼Œåˆ™è¿˜éœ€è¦ä¸ºæœåŠ¡å™¨è®¾ç½®è·¯ç”±ã€‚è·¯ç”±å¯ä»¥æ ¹æ®ä¸åŒçš„è¯·æ±‚æ–¹å¼å’Œè¯·æ±‚åœ°å€æ¥å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ã€‚</p><p>ä¸€ä¸ªè·¯ç”±çš„ç»„æˆæœ‰<code>è¯·æ±‚æ–¹æ³•</code> ï¼Œ<code>è·¯å¾„</code>å’Œ<code>å›è°ƒå‡½æ•°</code>ç»„æˆã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token operator">&lt;</span>method<span class="token operator">&gt;</span><span class="token punctuation">(</span>pathï¼Œcallback<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä»£ç ğŸ‘‡ğŸ‘‡ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 1.å¯¼å…¥express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 2.åˆ›å»ºåº”ç”¨å¯¹è±¡</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 3.åˆ›å»ºè·¯ç”±</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/home&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;home&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// åœ¨æœåŠ¡å™¨ä¸­å†™ä¸€ä¸ª / è¡¨ç¤ºæœåŠ¡å™¨çš„æ ¹ç›®å½• (http://localhost:3000)</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;home&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;login login&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// æ‰€æœ‰æ–¹æ³•</span>
app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&quot;/test&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;test test&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 404</span>
app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;404 NOT FOUND&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ç«¯å£ä¸º3000çš„æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2è·å–è¯·æ±‚å‚æ•°" tabindex="-1"><a class="header-anchor" href="#_2-2è·å–è¯·æ±‚å‚æ•°" aria-hidden="true">#</a> 2.2è·å–è¯·æ±‚å‚æ•°</h3><p>express æ¡†æ¶å°è£…äº†ä¸€äº› API æ¥æ–¹ä¾¿è·å–è¯·æ±‚æŠ¥æ–‡ä¸­çš„æ•°æ®ï¼Œå¹¶ä¸”å…¼å®¹åŸç”Ÿ HTTP æ¨¡å—çš„è·å–æ–¹å¼ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 1.å¯¼å…¥express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 2.åˆ›å»ºåº”ç”¨å¯¹è±¡</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 3.åˆ›å»ºè·¯ç”±</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/home&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1.åŸç”Ÿæ“ä½œ</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>method<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>httpVersion<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">)</span>
    <span class="token comment">//2. express ç‹¬æœ‰çš„è·å–æŠ¥æ–‡çš„æ–¹å¼</span>
    <span class="token comment">//è·å–æŸ¥è¯¢å­—ç¬¦ä¸²</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span>
    <span class="token comment">// è·å–ip</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>ip<span class="token punctuation">)</span>
    <span class="token comment">// è·å–æŒ‡å®šçš„è¯·æ±‚å¤´</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;host&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;home&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ç«¯å£ä¸º3000çš„æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3è·å–è·¯ç”±å‚æ•°" tabindex="-1"><a class="header-anchor" href="#_2-3è·å–è·¯ç”±å‚æ•°" aria-hidden="true">#</a> 2.3è·å–è·¯ç”±å‚æ•°</h3><p>è·¯ç”±å‚æ•°æŒ‡çš„æ˜¯ URL è·¯å¾„ä¸­çš„å‚æ•°ï¼ˆæ•°æ®ï¼‰</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/:id&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">åºå·ä¸º</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ç«¯å£ä¸º3000çš„æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-4å“åº”è®¾ç½®" tabindex="-1"><a class="header-anchor" href="#_2-4å“åº”è®¾ç½®" aria-hidden="true">#</a> 2.4å“åº”è®¾ç½®</h3><p>express æ¡†æ¶å°è£…äº†ä¸€äº› API æ¥æ–¹ä¾¿ç»™å®¢æˆ·ç«¯å“åº”æ•°æ®ï¼Œå¹¶ä¸”å…¼å®¹åŸç”Ÿ HTTP æ¨¡å—çš„è·å–æ–¹å¼ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">/* // 1.åŸç”Ÿå“åº”
   	res.statusCode = 203 // è®¾ç½®å“åº”çŠ¶æ€ç  é»˜è®¤200
    res.statusMessage = &quot;resInfo&quot;  // è®¾ç½®å“åº”çŠ¶æ€æè¿°
    // è®¾ç½®å“åº”å¤´
    res.setHeader(&quot;content-type&quot;, &quot;text/html;charset=utf-8&quot;)
    // å“åº”ä½“çš„è®¾ç½®
    res.write(&quot;love&quot;) 
    res.end(&quot;nodejs&quot;) */</span>

    <span class="token comment">// 2..express å“åº”</span>
    <span class="token comment">// ç”¨æ¥è®¾ç½®å“åº”çŠ¶æ€ç ï¼Œä½†æ˜¯å¹¶ä¸å‘é€</span>
    <span class="token comment">// res.status(500)</span>
    <span class="token comment">// å‘å®¢æˆ·ç«¯å‘é€å“åº”çŠ¶æ€ç </span>
    <span class="token comment">// sendStatus(500)</span>
    <span class="token comment">// è®¾ç½®å“åº”å¤´</span>
    <span class="token comment">// res.set(&quot;xxx&quot;, &quot;yyy&quot;)</span>
    <span class="token comment">// è®¾ç½®å¹¶å‘é€å“åº”ä½“ é»˜è®¤å“åº”çŠ¶æ€ç 200</span>
    <span class="token comment">// res.send(&quot;ä½ å¥½ express&quot;)</span>
    <span class="token comment">// res.status(500).set(&quot;xxx&quot;, &quot;yyy&quot;).send(&quot;ä½ å¥½sserpxe&quot;)</span>

    <span class="token comment">// 3.å…¶ä»–å“åº”</span>
    <span class="token comment">// res.redirect(&quot;https://fyjwww.gitee.io/&quot;) // è·³è½¬å“åº” é‡å®šå‘</span>
    <span class="token comment">// res.download(__dirname + &quot;/package.json&quot;) // ä¸‹è½½å“åº”</span>
    <span class="token comment">// res.json({ name: &quot;æ˜¯æ¶ˆåŠ›ï¼&quot; }) // JSON å“åº”</span>
    <span class="token comment">// å“åº”æ–‡ä»¶å†…å®¹</span>
    res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">&quot;/test.html&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ç«¯å£ä¸º3000çš„æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-ä¸­é—´ä»¶" tabindex="-1"><a class="header-anchor" href="#_3-ä¸­é—´ä»¶" aria-hidden="true">#</a> 3.ä¸­é—´ä»¶</h2><blockquote><p>å®˜ç½‘åŸè¯ï¼šExpressæ˜¯ä¸€ä¸ªè·¯ç”±å’Œä¸­é—´ä»¶ Web æ¡†æ¶ï¼Œå®ƒè‡ªå·±çš„åŠŸèƒ½å¾ˆå°‘ï¼šExpress åº”ç”¨ç¨‹åºæœ¬è´¨ä¸Šæ˜¯ä¸€ç³»åˆ—ä¸­é—´ä»¶å‡½æ•°è°ƒç”¨ã€‚https://www.expressjs.com.cn/guide/using-middleware.html</p><p>ä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰æœ¬è´¨æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚ ä¸­é—´ä»¶å‡½æ•° å¯ä»¥åƒè·¯ç”±å›è°ƒä¸€æ ·è®¿é—® è¯·æ±‚å¯¹è±¡ï¼ˆrequestï¼‰ ï¼Œ å“åº”å¯¹è±¡ï¼ˆresponseï¼‰ã€‚ ä¸­é—´ä»¶çš„ä½œç”¨ å°±æ˜¯ ä½¿ç”¨å‡½æ•°å°è£…å…¬å…±æ“ä½œï¼Œç®€åŒ–ä»£ç ã€‚</p></blockquote><p><strong>åœ¨expressæˆ‘ä»¬ä½¿ç”¨<code>app.use</code>å®šä¹‰ä¸€ä¸ªä¸­é—´ä»¶</strong></p><ul><li>ä¸­é—´ä»¶ä½œç”¨å’Œè·¯ç”±å¾ˆåƒï¼Œç”¨æ³•å¾ˆåƒ</li><li>ä½†æ˜¯è·¯ç”±ä¸åŒºåˆ†è¯·æ±‚çš„æ–¹å¼ï¼Œåªçœ‹è·¯å¾„</li></ul><h3 id="_3-1å…¨å±€ç”Ÿæ•ˆä¸­é—´ä»¶" tabindex="-1"><a class="header-anchor" href="#_3-1å…¨å±€ç”Ÿæ•ˆä¸­é—´ä»¶" aria-hidden="true">#</a> 3.1å…¨å±€ç”Ÿæ•ˆä¸­é—´ä»¶</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// next() æ˜¯å›è°ƒå‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨å‡½æ•°åï¼Œå¯ä»¥è§¦å‘åç»­çš„ä¸­é—´ä»¶</span>
<span class="token comment">// next() ä¸èƒ½åœ¨å“åº”å¤„ç†å®Œæ¯•åè°ƒç”¨</span>
<span class="token keyword">const</span> <span class="token function-variable function">recordMiddleware1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;111&quot;</span><span class="token punctuation">,</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// res.send(&quot;&lt;h1&gt;111&lt;h1&gt;&quot;)</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//æ”¾è¡Œï¼Œæˆ‘ä¸ç®¡äº†~ äº¤ç»™ç¬¬äºŒä¸ªä¸­é—´ä»¶</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">recordMiddleware2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;222&quot;</span><span class="token punctuation">,</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// res.send(&quot;&lt;h1&gt;222&lt;h1&gt;&quot;)</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// å…¨å±€ç”Ÿæ•ˆçš„ä¸­é—´ä»¶,ä¸­é—´ä»¶è°ƒç”¨é¡ºåºä»¥ä¼ å…¥é¡ºåºä¸ºå‡†</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>recordMiddleware1<span class="token punctuation">,</span>recordMiddleware2<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æœåŠ¡å™¨è¿è¡Œåœ¨3000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2å±€éƒ¨ç”Ÿæ•ˆä¸­é—´ä»¶" tabindex="-1"><a class="header-anchor" href="#_3-2å±€éƒ¨ç”Ÿæ•ˆä¸­é—´ä»¶" aria-hidden="true">#</a> 3.2å±€éƒ¨ç”Ÿæ•ˆä¸­é—´ä»¶</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/** 
app.get(&#39;/è·¯å¾„&#39;,\`ä¸­é—´ä»¶å‡½æ•°\`,(request,response)=&gt;<span class="token punctuation">{</span>
<span class="token punctuation">}</span>);
app.get(&#39;/è·¯å¾„&#39;,\`ä¸­é—´ä»¶å‡½æ•°1\`,\`ä¸­é—´ä»¶å‡½æ•°2\`,(request,response)=&gt;<span class="token punctuation">{</span>
<span class="token punctuation">}</span>)
*/</span>
<span class="token doc-comment comment">/**
 * é’ˆå¯¹ /admin  çš„è¯·æ±‚ï¼Œè¦æ±‚URLæºå¸¦code=521 å‚æ•°ï¼Œå¦‚æœªæºå¸¦æç¤º  â€œæš—å·é”™è¯¯â€
 */</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">recordMiddleware1</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>code <span class="token operator">==</span> <span class="token string">&quot;521&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;æš—å·é”™è¯¯&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// å¿…é¡»æºå¸¦code=521</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/admin&quot;</span><span class="token punctuation">,</span> recordMiddleware1<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;è¿™æ˜¯admin&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// ä¸æºå¸¦code=521ä¹Ÿèƒ½è®¿é—®</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/admin/person&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;è¿™æ˜¯person&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æœåŠ¡å™¨è¿è¡Œåœ¨3000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3é™æ€èµ„æºä¸­é—´ä»¶" tabindex="-1"><a class="header-anchor" href="#_3-3é™æ€èµ„æºä¸­é—´ä»¶" aria-hidden="true">#</a> <p id="static">3.3é™æ€èµ„æºä¸­é—´ä»¶</p></h3><p>expresså†…ç½®ä¸­é—´ä»¶ express.static() https://www.expressjs.com.cn/en/4x/api.html#express.static</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// express.static(root, [options]) </span>
<span class="token comment">// root é™æ€èµ„æºæ–‡ä»¶è·¯å¾„</span>
<span class="token comment">// é™æ€èµ„æºä¸­é—´ä»¶è®¾ç½®</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">&quot;/public&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;hello express&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æœåŠ¡å·²ç»å¯åŠ¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>æ³¨æ„äº‹é¡¹:</p><ol><li>index.html æ–‡ä»¶ä¸ºé»˜è®¤æ‰“å¼€çš„èµ„æº</li><li>å¦‚æœé™æ€èµ„æºä¸è·¯ç”±è§„åˆ™åŒæ—¶åŒ¹é…ï¼Œè°å…ˆåŒ¹é…è°å°±å“åº”</li><li>è·¯ç”±å“åº”åŠ¨æ€èµ„æºï¼Œé™æ€èµ„æºä¸­é—´ä»¶å“åº”é™æ€èµ„æº</li></ol></blockquote><h3 id="_3-4è·å–è¯·æ±‚ä½“æ•°æ®body-parser" tabindex="-1"><a class="header-anchor" href="#_3-4è·å–è¯·æ±‚ä½“æ•°æ®body-parser" aria-hidden="true">#</a> 3.4è·å–è¯·æ±‚ä½“æ•°æ®body-parser</h3>`,35),v={href:"https://www.npmjs.com/package/body-parser",target:"_blank",rel:"noopener noreferrer"},m=p(`<p>npm i body-parser</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * æŒ‰ç…§è¦æ±‚æ­å»º HTTPæœåŠ¡
 * GET /login æ˜¾ç¤ºè¡¨å•ç½‘é¡µ
 * POST /login è·å–è¡¨å•ä¸­çš„ ç”¨æˆ·å å’Œ å¯†ç 
 */</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;body-parser&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// è§£æurlç¼–ç ï¼ˆurlencoded ï¼‰æ ¼å¼</span>
<span class="token keyword">const</span> urlencodedParser <span class="token operator">=</span> bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">extended</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// extendedæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ç±»å‹çš„å‚æ•°ï¼Œé»˜è®¤å€¼ä¸ºtrueã€‚</span>
<span class="token comment">// å¦‚æœè®¾ç½®ä¸ºfalseï¼Œåˆ™ä½¿ç”¨querystringæ¨¡å—è§£æè¯·æ±‚ä½“æ•°æ®ï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œåˆ™ä½¿ç”¨qsç¬¬ä¸‰æ–¹ç»„ä»¶è§£æè¯·æ±‚ä½“æ•°æ®ã€‚</span>
<span class="token comment">// qsç»„ä»¶æ”¯æŒä¸€äº›æ¯”è¾ƒå¤æ‚çš„è§£ææ“ä½œï¼Œå¦‚è§£æåµŒå¥—çš„å¯¹è±¡ç­‰ã€‚</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// res.send(&quot;è¡¨å•é¡µé¢&quot;)</span>
    <span class="token comment">// å“åº”HTMLæ–‡ä»¶å†…å®¹</span>
    res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">&quot;/10_form.html&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// å±€éƒ¨ä½¿ç”¨ä¸­é—´ä»¶</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> urlencodedParser<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//  request.body æ¥è·å–è¯·æ±‚ä½“æ•°æ®</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;è·å–ç”¨æˆ·æ•°æ®&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æœåŠ¡å·²ç»å¯åŠ¨&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-5-ä¸­é—´ä»¶åˆ†ç±»" tabindex="-1"><a class="header-anchor" href="#_3-5-ä¸­é—´ä»¶åˆ†ç±»" aria-hidden="true">#</a> 3.5 ä¸­é—´ä»¶åˆ†ç±»</h3>`,3),b={href:"https://www.expressjs.com.cn/guide/using-middleware.html#middleware.application",target:"_blank",rel:"noopener noreferrer"},g={href:"https://www.expressjs.com.cn/guide/using-middleware.html#middleware.router",target:"_blank",rel:"noopener noreferrer"},q={href:"https://www.expressjs.com.cn/guide/using-middleware.html#middleware.error-handling",target:"_blank",rel:"noopener noreferrer"},h={href:"https://www.expressjs.com.cn/guide/using-middleware.html#middleware.built-in",target:"_blank",rel:"noopener noreferrer"},f=n("a",{href:"#static"},"æœ¬æ–‡é™æ€èµ„æºä¸­é—´ä»¶å°±æ˜¯å…¶ä¸­ä¹‹ä¸€",-1),x={href:"https://www.expressjs.com.cn/guide/using-middleware.html#middleware.third-party",target:"_blank",rel:"noopener noreferrer"},y=p(`<h2 id="_4-nodemon" tabindex="-1"><a class="header-anchor" href="#_4-nodemon" aria-hidden="true">#</a> 4.nodemon</h2><p>ç›®å‰ï¼ŒæœåŠ¡å™¨ä»£ç ä¿®æ”¹åå¿…é¡»è¦é‡å¯ï¼Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸€ç§æ–¹å¼ï¼Œå¯ä»¥è‡ªåŠ¨ç›‘è§†ä»£ç çš„ä¿®æ”¹ï¼Œä»£ç ä¿®æ”¹ä»¥åå¯ä»¥è‡ªåŠ¨é‡å¯æœåŠ¡å™¨ è¦å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸ªæ¨¡å— <code>nodemon</code>ã€‚ ä½¿ç”¨æ–¹å¼ï¼š</p><ol><li><p>å…¨å±€å®‰è£…</p><ul><li><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> i nodemon <span class="token parameter variable">-g</span>
<span class="token function">yarn</span> global <span class="token function">add</span> nodemon

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡<code>yarn</code>è¿›è¡Œå…¨å±€å®‰è£…æ—¶ï¼Œé»˜è®¤<code>yarn</code>çš„ç›®å½•å¹¶ä¸åœ¨ç¯å¢ƒå˜é‡ä¸­ï¼Œéœ€è¦æ‰‹åŠ¨å°†è·¯å¾„æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­,ç„¶åé‡å¯vscodeã€‚</p></li><li><p>å¯åŠ¨ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>nodemon  fileName   è¿è¡Œindex.js
nodemon xxx   è¿è¡ŒæŒ‡å®šçš„js 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>åœ¨é¡¹ç›®ä¸­å®‰è£…</p><p>å¼€å‘ä¾èµ–ï¼Œæ²¡æœ‰è¿™ä¸ªé¡¹ç›®ä¹Ÿèƒ½è¿è¡Œï¼Œè°ƒè¯•çš„æ—¶å€™ä½¿ç”¨ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> i nodemon <span class="token parameter variable">-D</span>
<span class="token function">yarn</span> <span class="token function">add</span> nodemon <span class="token parameter variable">-D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯åŠ¨</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>npx nodemon    
npx nodemon æŒ‡å®šæ–‡ä»¶è·¯å¾„
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä¸Šé¢è¿™æ ·æ‰“å‘½ä»¤è¿˜æ˜¯å¾ˆé•¿å¯ä»¥å»jsonçš„scriptsæ·»åŠ å‘½ä»¤</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
 	<span class="token string-property property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npx nodemon index.js&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="_5-é™æ€èµ„æºä»£ç " tabindex="-1"><a class="header-anchor" href="#_5-é™æ€èµ„æºä»£ç " aria-hidden="true">#</a> 5.é™æ€èµ„æºä»£ç </h2><p>index.html</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>ç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/login<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>get<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
            ç”¨æˆ·å <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
            å¯†ç  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ç™»å½•<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>æˆ‘æ˜¯ä¸€ä¸ªç½‘é¡µï¼Œä¸€ä¸ªé™æ€ç½‘é¡µ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./an.jpg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// åˆ›å»ºæœåŠ¡å™¨å®ä¾‹</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// é…ç½®è·¯ç”±</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">/* 
        å¸Œæœ›ç”¨æˆ·è¿”å›æ ¹ç›®å½•æ—¶ï¼Œå¯ä»¥ç»™ç”¨æˆ·è¿”å›ä¸€ä¸ªç½‘é¡µ
    */</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;æ€ä¹ˆåŠå‘¢ï¼Ÿ&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">// res.send(&quot;è¿™æ˜¯Helloçš„è·¯ç”±&quot;)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-æŸ¥è¯¢å­—ç¬¦ä¸²" tabindex="-1"><a class="header-anchor" href="#_6-æŸ¥è¯¢å­—ç¬¦ä¸²" aria-hidden="true">#</a> 6.æŸ¥è¯¢å­—ç¬¦ä¸²</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// åˆ›å»ºæœåŠ¡å™¨å®ä¾‹</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// use()ä¸­é—´ä»¶</span>
<span class="token comment">/* 
         æœåŠ¡å™¨ä¸­çš„ä»£ç ï¼Œå¯¹äºå¤–éƒ¨æ¥è¯´éƒ½æ˜¯ä¸å¯è§çš„ï¼Œ
        æ‰€ä»¥æˆ‘ä»¬å†™çš„htmlé¡µé¢ï¼Œæµè§ˆå™¨æ— æ³•ç›´æ¥è®¿é—®
        å¦‚æœå¸Œæœ›æµè§ˆå™¨å¯ä»¥è®¿é—®ï¼Œåˆ™éœ€è¦å°†é¡µé¢æ‰€åœ¨çš„ç›®å½•è®¾ç½®ä¸ºé™æ€èµ„æºçš„ç›®å½•    
*/</span>
<span class="token comment">// è®¾ç½®staticä¸­é—´ä»¶åï¼Œæµè§ˆå™¨è®¿é—®æ—¶ï¼Œä¼šè‡ªåŠ¨å»publicç›®å½•ä¸‹å¯»æ‰¾æ˜¯å¦åŒ¹é…çš„é™æ€èµ„æº </span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./public&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å–åˆ°ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç </span>
    <span class="token comment">// req.query è¡¨ç¤ºæŸ¥è¯¢å­—ç¬¦ä¸²ä¸­çš„è¯·æ±‚å‚æ•°</span>
    <span class="token comment">// console.log(req.query.username)</span>
    <span class="token comment">// console.log(req.query.password)</span>
    <span class="token comment">// éªŒè¯ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;è¯·æ±‚å·²ç»æ”¶åˆ°&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>username <span class="token operator">==</span> <span class="token string">&quot;sunwukong&quot;</span> <span class="token operator">&amp;&amp;</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>password <span class="token operator">===</span> <span class="token string">&quot;123123&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;ç™»å½•æˆåŠŸ&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// å¯åŠ¨æœåŠ¡å™¨</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æœåŠ¡å™¨å·²å¯åŠ¨!&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-getå‘é€å‚æ•°çš„ä¸¤ç§è¯·æ±‚æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_7-getå‘é€å‚æ•°çš„ä¸¤ç§è¯·æ±‚æ–¹å¼" aria-hidden="true">#</a> 7.getå‘é€å‚æ•°çš„ä¸¤ç§è¯·æ±‚æ–¹å¼</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å¼•å…¥express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// å¼•å…¥path</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// åˆ›å»ºæœåŠ¡å™¨å®ä¾‹</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// é…ç½®é™æ€èµ„æºçš„è·¯å¾„</span>
<span class="token comment">// public  http://localhost:3000/</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./public&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// æ·»åŠ ä¸€ä¸ªè·¯ç”±,å¯ä»¥è¯»å–getè¯·æ±‚çš„å‚æ•°</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å–ç”¨æˆ·å‘é€çš„æ•°æ®</span>
    <span class="token comment">// é€šè¿‡req.queryæ¥è·å–æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­çš„æ•°æ®</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>username <span class="token operator">===</span> <span class="token string">&quot;admin&quot;</span> <span class="token operator">&amp;&amp;</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>password <span class="token operator">===</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;ä½ æˆåŠŸäº†!&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯!&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// getè¯·æ±‚å‘é€å‚æ•°çš„ç¬¬äºŒç§æ–¹å¼</span>
<span class="token comment">// /hello/:id è¡¨ç¤ºç”¨æˆ·è®¿é—® /hello/xxxæ—¶å°±ä¼šè§¦å‘</span>
<span class="token comment">// åœ¨è·¯å¾„ä¸­ä»¥å†’å·å‘½åçš„éƒ¨åˆ†æˆ‘ä»¬ç§°ä¸ºparam,åœ¨getè¯·æ±‚å®ƒå¯ä»¥è¢«è§£æä¸ºè¯·æ±‚å‚æ•°</span>
<span class="token comment">// paramä¼ å‚ä¸€èˆ¬ä¸ä¼šä¼ é€’ç‰¹åˆ«å¤æ‚çš„å‚æ•°</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/hello/:name&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// çº¦å®šä¼˜äºé…ç½®</span>
    <span class="token comment">// å¯ä»¥é€šè¿‡req.paramså±æ€§æ¥è·å–è¿™äº›å‚æ•°</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;è¿™æ˜¯helloçš„è·¯ç”±&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æœåŠ¡å™¨å·²ç»å¯åŠ¨&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-postè¯·æ±‚å‘é€å‚æ•°" tabindex="-1"><a class="header-anchor" href="#_8-postè¯·æ±‚å‘é€å‚æ•°" aria-hidden="true">#</a> 8.postè¯·æ±‚å‘é€å‚æ•°</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å¼•å…¥express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// å¼•å…¥path</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// åˆ›å»ºæœåŠ¡å™¨å®ä¾‹</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// é…ç½®é™æ€èµ„æºçš„è·¯å¾„</span>
<span class="token comment">// public  http://localhost:3000/</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./public&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// å¼•å…¥è§£æè¯·æ±‚ä½“çš„ä¸­é—´ä»¶</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// é€šè¿‡req.bodyæ¥è·å–postè¯·æ±‚çš„å‚æ•°ï¼ˆè¯·æ±‚ä½“ä¸­çš„å‚æ•°ï¼‰</span>
    <span class="token comment">// é»˜è®¤æƒ…å†µä¸‹ï¼Œexpressä¸ä¼šè‡ªåŠ¨è§£æè¯·æ±‚ä½“ï¼Œéœ€è¦é€šè¿‡ä¸­é—´ä»¶æ¥ä¸ºå…¶å¢åŠ åŠŸèƒ½</span>
    <span class="token comment">// console.log(req.query)</span>
    <span class="token keyword">const</span> username <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>username
    <span class="token keyword">const</span> password <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>password
    <span class="token keyword">if</span> <span class="token punctuation">(</span>username <span class="token operator">===</span> <span class="token string">&quot;admin&quot;</span> <span class="token operator">&amp;&amp;</span> password <span class="token operator">===</span> <span class="token string">&quot;123123&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;ä½ æˆåŠŸäº†!&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æœåŠ¡å™¨å·²ç»å¯åŠ¨&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>é…ç½®é”™è¯¯è·¯ç”±</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å¼•å…¥express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// åˆ›å»ºæœåŠ¡å™¨å®ä¾‹</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// å¼•å…¥pathæ¨¡å—</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// é…ç½®é™æ€èµ„æºè·¯å¾„</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;public&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// é…ç½®è¯·æ±‚ä½“è§£æ</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">extend</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// å¯ä»¥åœ¨æ‰€æœ‰è·¯ç”±çš„åé¢é…ç½®é”™è¯¯è·¯ç”±</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//  åªè¦è¿™ä¸ªä¸­é—´ä»¶ä¸€æ‰§è¡Œï¼Œè¯´æ˜ä¸Šè¾¹çš„åœ°å€éƒ½æ²¡æœ‰åŒ¹é…</span>
    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;404 NOT FOUND&lt;h1&gt;&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9-express-router" tabindex="-1"><a class="header-anchor" href="#_9-express-router" aria-hidden="true">#</a> 9.express.Router()</h2><blockquote><p>Routeræ˜¯expressä¸­åˆ›å»ºçš„ä¸€ä¸ªå¯¹è±¡ã€‚</p><p>ä½œç”¨å°±æ˜¯ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æ›´å¥½çš„æ ¹æ®è·¯ç”±å»åˆ†æ¨¡å—ã€‚é¿å…å°†æ‰€æœ‰è·¯ç”±éƒ½å†™åœ¨å…¥å£æ–‡ä»¶ä¸­ã€‚</p><p>åˆ›å»ºä¸€ä¸ªroutesç›®å½•ï¼Œä¸“é—¨ç”¨äºæ”¾ç½®è·¯ç”±æ–‡ä»¶ï¼Œé€šè¿‡module.exportså¯¼å‡ºä¾›å¤–éƒ¨ä½¿ç”¨ã€‚</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// routerå®é™…ä¸Šæ˜¯ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå¯ä»¥åœ¨è¯¥ä¸­é—´ä»¶å»ç»‘å®šå„ç§è·¯ç”±ä»¥åŠå…¶ä»–çš„ä¸­é—´ä»¶</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Router&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">/* 
app.use([path,] callback [, callback...])  path è°ƒç”¨ä¸­é—´ä»¶å‡½æ•°çš„è·¯å¾„  è·¯ç”±å‰ç¼€
*/</span>
<span class="token comment">//ä½¿è·¯ç”±ç”Ÿæ•ˆ</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æœåŠ¡å™¨è¿è¡Œåœ¨3000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_10-æ¨¡æ¿å¼•æ“" tabindex="-1"><a class="header-anchor" href="#_10-æ¨¡æ¿å¼•æ“" aria-hidden="true">#</a> 10.æ¨¡æ¿å¼•æ“</h2><blockquote><p><strong>htmlé¡µé¢å±äºé™æ€é¡µé¢</strong>ï¼Œåˆ›å»ºçš„æ—¶å€™ä»€ä¹ˆæ ·å­ï¼Œç”¨æˆ·çœ‹åˆ°çš„å°±æ˜¯ä»€ä¹ˆæ ·å­ï¼Œä¸ä¼šè‡ªåŠ¨è·ŸéšæœåŠ¡å™¨ä¸­æ•°æ®çš„å˜åŒ–è€Œå˜åŒ–ã€‚ å¸Œæœ›æœ‰è¿™ä¹ˆä¸€ä¸ªä¸œè¥¿ï¼Œä»–å‘¢é•¿çš„åƒæ˜¯ä¸ªç½‘é¡µï¼Œä½†æ˜¯ä»–é‡Œè¾¹å¯ä»¥åµŒå…¥å˜é‡ï¼Œè¿™ä¸ªä¸œè¥¿åœ¨nodeä¸­è¢«ç§°ä¸º <strong>æ¨¡æ¿å¼•æ“</strong>ï¼Œä¸€ç§åˆ†ç¦»ç”¨æˆ·ç•Œé¢å’Œä¸šåŠ¡æ•°æ®çš„æŠ€æœ¯ã€‚</p></blockquote><p>åœ¨nodeä¸­å­˜åœ¨æœ‰å¾ˆå¤šä¸ªæ¨¡æ¿å¼•æ“ï¼Œéƒ½å„å…·ç‰¹è‰²ï¼Œæ¨èejsã€‚</p><ul><li>å®˜ç½‘: https://ejs.co/</li><li>ä¸­æ–‡ç«™ï¼šhttps://ejs.bootcss.com/</li></ul><p>ejsæ˜¯nodeä¸­çš„ä¸€æ¬¾æ¨¡æ¿å¼•æ“ï¼Œä½¿ç”¨æ­¥éª¤ï¼š</p><ol><li><p>å®‰è£…ejs <code>npm i ejs</code></p></li><li><p>é…ç½®expressçš„æ¨¡æ¿å¼•æ“ä¸ºejs</p><p><strong>app.set(&quot;view engine&quot;, &quot;ejs&quot;)</strong></p></li><li><p>é…ç½®æ¨¡æ¿è·¯å¾„</p><p><strong>app.set(&quot;views&quot;, path.resolve(__dirname, &quot;views&quot;))</strong><strong>æ³¨æ„ï¼šæ¨¡æ¿å¼•æ“éœ€è¦è¢«expressæ¸²æŸ“åæ‰èƒ½ä½¿ç”¨</strong></p></li></ol><p><code>res.render()</code> ç”¨æ¥æ¸²æŸ“ä¸€ä¸ªæ¨¡æ¿å¼•æ“ï¼Œå¹¶å°†å…¶è¿”å›ç»™æµè§ˆå™¨ã€‚ ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ¨¡æ¿åå­—ï¼Œå¯ä»¥å°†ä¸€ä¸ªå¯¹è±¡ä½œä¸º<code>render</code>çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ï¼Œè¿™æ ·åœ¨æ¨¡æ¿ä¸­å¯ä»¥è®¿é—®åˆ°å¯¹è±¡ä¸­çš„æ•°æ® <strong>res.render(&quot;students&quot;, { name: &quot;å­™æ‚Ÿç©º&quot;, age: 18, gender: &quot;ç”·&quot; })</strong></p><ul><li><code>&lt;%= %&gt;</code>åœ¨ejsä¸­è¾“å‡ºå†…å®¹æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨å¯¹å­—ç¬¦ä¸²çš„ç‰¹æ®Šç¬¦å·è¿›è¡Œè½¬ä¹‰ï¼Œ<strong>è¿™ä¸ªè®¾è®¡ä¸»è¦æ˜¯ä¸ºäº†é¿å…ï¼Œxss æ”»å‡»</strong>ã€‚</li><li><code>&lt;%- %&gt;</code>ç›´æ¥å°†å†…å®¹è¾“å‡ºã€‚</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> name <span class="token operator">%</span><span class="token operator">&gt;</span> <span class="token comment">//å‡å¦‚nameæ˜¯&quot;å­™æ‚Ÿç©º&quot;è¾“å‡ºå°±æ˜¯ å­™æ‚Ÿç©º   å¦‚æœå¸¦æœ‰æ ‡ç­¾å°±è§£ææ ‡ç­¾ ä¹Ÿå¯ä»¥è§£æè„šæœ¬ä»£ç </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>&lt;% %&gt;</code> å¯ä»¥åœ¨å…¶ä¸­ç›´æ¥ç¼–å†™jsä»£ç ï¼Œ<strong>jsä»£ç ä¼šåœ¨æœåŠ¡å™¨ä¸­æ‰§è¡Œ</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>    <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> student <span class="token keyword">of</span> <span class="token constant">STUDENT_ARR</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">%</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>å§“åï¼š
            <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> student<span class="token punctuation">.</span>username <span class="token operator">%</span><span class="token operator">&gt;</span>
                å¹´é¾„ï¼š
                <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> student<span class="token punctuation">.</span>age <span class="token operator">%</span><span class="token operator">&gt;</span>
                    æ€§åˆ«ï¼š
                    <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> student<span class="token punctuation">.</span>gender <span class="token operator">%</span><span class="token operator">&gt;</span>
                        åœ°å€ï¼š
                        <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> student<span class="token punctuation">.</span>gender <span class="token operator">%</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">}</span><span class="token operator">%</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_11-cookie" tabindex="-1"><a class="header-anchor" href="#_11-cookie" aria-hidden="true">#</a> 11.cookie</h2><ul><li>cookieæ˜¯HTTPåè®®ä¸­ç”¨æ¥è§£å†³æ— çŠ¶æ€é—®é¢˜çš„æŠ€æœ¯</li><li>cookieçš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå¤´ <ul><li>æœåŠ¡å™¨ä»¥å“åº”å¤´çš„å½¢å¼å°†cookieå‘é€ç»™å®¢æˆ·ç«¯,å®¢æˆ·ç«¯æ”¶åˆ°ä»¥åä¼šå°†å…¶å­˜å‚¨ï¼Œå¹¶åœ¨ä¸‹æ¬¡å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶å°†å…¶ä¼ å›ï¼Œ è¿™æ ·æœåŠ¡å™¨å°±å¯ä»¥æ ¹æ®cookieæ¥è¯†åˆ«å‡ºå®¢æˆ·ç«¯äº†</li></ul></li></ul><p>ä½¿ç”¨ï¼š</p><p>éœ€è¦å®‰è£…ä¸­é—´ä»¶æ¥ä½¿å¾—expresså¯ä»¥è§£æcookie 1.å®‰è£…<code>cookie-parser</code> yarn add cookie-parser 2.å¼•å…¥ <strong>const cookieParser = require(&quot;cookie-parser&quot;)</strong> 3.è®¾ç½®ä¸ºä¸­é—´ä»¶ <strong>app.use(cookieParser())</strong><strong>æˆ–è€… app.use(require(&quot;cookie-parser&quot;)())</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>    <span class="token comment">// req.cookies ç”¨æ¥è¯»å–å®¢æˆ·ç«¯å‘å›çš„cookie </span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>cookies<span class="token punctuation">)</span>
    <span class="token comment">// ç»™å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªcookie</span>
    res<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æœ‰æ•ˆæœŸï¼š</strong></p><ul><li>é»˜è®¤æƒ…å†µä¸‹cookieçš„æœ‰æ•ˆæœŸå°±æ˜¯ä¸€æ¬¡ä¼šè¯ï¼ˆ<code>session</code>ï¼‰ ä¼šè¯æ˜¯ä¸€æ¬¡ä»æ‰“å¼€åˆ°å…³é—­æµè§ˆå™¨çš„è¿‡ç¨‹</li><li><code>maxAge</code> ç”¨æ¥è®¾ç½®cookieæœ‰æ•ˆæ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/set&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sunwukong&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token comment">// é…ç½®å¯¹è±¡</span>
        <span class="token comment">// expires: new Date(2022, 10, 7)</span>
        <span class="token comment">// ä¸€ä¸ªæœˆ</span>
        <span class="token literal-property property">maxAge</span><span class="token operator">:</span> <span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">30</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;è®¾ç½®cookie&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/delete-cookie&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// cookieä¸€æ—¦å‘é€ç»™æµè§ˆå™¨æˆ‘ä»¬å°±ä¸èƒ½å†ä¿®æ”¹äº†</span>
    <span class="token comment">// ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘é€æ–°çš„cookieæ¥æ›¿æ¢æ—§cookieï¼Œä»è€Œè¾¾åˆ°ä¿®æ”¹çš„ç›®çš„</span>
    res<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">maxAge</span><span class="token operator">:</span><span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;åˆ é™¤cookie&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>cookieçš„ä¸è¶³</strong></p><ul><li><code>cookie</code>æ˜¯ç”±æœåŠ¡å™¨åˆ›å»ºï¼Œæµè§ˆå™¨ç¼“å­˜ï¼Œæ¯æ¬¡æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨æ—¶éƒ½éœ€è¦å°†<code>cookie</code>å‘å›ï¼Œè¿™å°±å¯¼è‡´æˆ‘ä»¬ä¸èƒ½åœ¨<code>cookie</code>ä¸­å­˜æ”¾è¾ƒå¤šçš„æ•°æ®ï¼Œå¹¶ä¸”<code>cookie</code>æ˜¯ç›´æ¥å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œå®¹æ˜“è¢«ç¯¡æ”¹ç›—ç”¨ã€‚</li><li><strong>æ³¨æ„ï¼š</strong> æˆ‘ä»¬åœ¨ä½¿ç”¨<code>cookie</code>ä¸€å®šä¸ä¼šåœ¨<code>cookie</code>ä¸­å­˜å‚¨æ•æ„Ÿæ•°æ®ã€‚</li><li>æ‰€ä»¥ä¸ºäº†Cookieçš„ä¸è¶³ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥è¿™æ ·ï¼š å°†ç”¨æˆ·çš„æ•°æ®ç»Ÿä¸€å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸­ï¼Œ æ¯ä¸€ä¸ªç”¨æˆ·çš„æ•°æ®éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„idï¼Œæˆ‘ä»¬åªéœ€é€šè¿‡cookieå°†idå‘é€ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨åªéœ€æ¯æ¬¡è®¿é—®æ—¶å°†idå‘å›ï¼Œå³å¯è¯»å–åˆ°æœåŠ¡å™¨ä¸­å­˜å‚¨çš„æ•°æ®ã€‚ è¿™ä¸ªæŠ€æœ¯æˆ‘ä»¬ç§°ä¹‹ä¸ºsessionï¼ˆä¼šè¯ï¼‰</li></ul><h2 id="_12-session" tabindex="-1"><a class="header-anchor" href="#_12-session" aria-hidden="true">#</a> 12.session</h2><blockquote><ul><li>sessionæ˜¯æœåŠ¡å™¨ä¸­çš„ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ç”¨æ¥å­˜å‚¨ç”¨æˆ·çš„æ•°æ®</li><li>æ¯ä¸€ä¸ªsessionå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„idï¼Œidä¼šé€šè¿‡cookieçš„å½¢å¼å‘é€ç»™å®¢æˆ·ç«¯</li><li>å®¢æˆ·ç«¯æ¯æ¬¡è®¿é—®æ—¶åªéœ€å°†å­˜å‚¨æœ‰idçš„cookieå‘å›å³å¯è·å–å®ƒåœ¨æœåŠ¡å™¨ä¸­å­˜å‚¨çš„æ•°æ®</li><li>åœ¨express å¯ä»¥é€šè¿‡ express-session ç»„ä»¶æ¥å®ç°sessionåŠŸèƒ½</li></ul></blockquote><ul><li>ä½¿ç”¨æ­¥éª¤ï¼š <strong>â‘  å®‰è£…</strong><code>**yarn add express-session**</code><strong>â‘¡ å¼•å…¥</strong><strong><code>const session = require(&quot;....&quot;)</code></strong><strong>â‘¢ è®¾ç½®ä¸ºä¸­é—´ä»¶</strong><strong><code>app.use(session({...}))</code></strong></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å¼•å…¥session ä¸ä¾èµ–cookieParser</span>
<span class="token keyword">const</span> session <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express-session&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// è®¾ç½®sessionä¸­é—´ä»¶</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">secret</span><span class="token operator">:</span> <span class="token string">&quot;hello&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/set&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// å­˜å‚¨session</span>
    req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>username <span class="token operator">=</span> <span class="token string">&quot;sunwukong&quot;</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;æŸ¥çœ‹session&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/get&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> username <span class="token operator">=</span> req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>username
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;è¯»å–session&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>session</code>æ˜¯æœåŠ¡å™¨ä¸­çš„ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ç”¨æ¥å­˜å‚¨ç”¨æˆ·çš„ä¿¡æ¯ï¼Œæ¯ä¸€ä¸ª<code>session</code>éƒ½ä¼šæœ‰ä¸€ä¸ªå”¯ä¸€çš„<code>id</code>ï¼Œ<code>session</code>åˆ›å»ºåï¼Œ<code>id</code>ä¼šä»¥<code>cookie</code>çš„å½¢å¼å‘é€ç»™æµè§ˆå™¨ã€‚ æµè§ˆå™¨æ”¶åˆ°ä»¥åï¼Œæ¯æ¬¡è®¿é—®éƒ½ä¼šå°†idå‘å›ï¼ŒæœåŠ¡å™¨ä¸­å°±å¯ä»¥æ ¹æ®idæ‰¾åˆ°å¯¹åº”çš„session <strong>idï¼ˆcookieï¼‰ ----&gt; sessionå¯¹è±¡</strong></p><p><strong>sessionä»€ä¹ˆæ—¶å€™ä¼šå¤±æ•ˆï¼Ÿ</strong> ç¬¬ä¸€ç§ æµè§ˆå™¨çš„cookieæ²¡äº† ç¬¬äºŒç§ æœåŠ¡å™¨ä¸­çš„sessionå¯¹è±¡æ²¡äº†</p><p>express-sessioné»˜è®¤æ˜¯å°†sessionå­˜å‚¨åˆ°å†…å­˜ä¸­çš„ï¼Œæ‰€ä»¥æœåŠ¡å™¨ä¸€æ—¦é‡å¯sessionä¼šè‡ªåŠ¨é‡ç½®ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨sessioné€šå¸¸ä¼šå¯¹sessionè¿›è¡Œä¸€ä¸ªæŒä¹…åŒ–çš„æ“ä½œï¼ˆå†™åˆ°æ–‡ä»¶æˆ–æ•°æ®åº“ï¼‰</p><p>å¦‚æœå°†<code>session</code>å­˜å‚¨åˆ°æœ¬æ–‡ä»¶ä¸­ï¼š - éœ€è¦å¼•å…¥ä¸€ä¸ªä¸­é—´ä»¶<code>session-file-store</code> - ä½¿ç”¨æ­¥éª¤ï¼š â‘  å®‰è£… <strong>yarn add session-file-store</strong> â‘¡ å¼•å…¥ <strong>const FileStore = require(&quot;session-file-store&quot;)(session)</strong> â‘¢ è®¾ç½®ä¸ºä¸­é—´ä»¶<br> app.use( session({ store: new FileStore({}), secret: &quot;dazhaxie&quot; }) )</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> session <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express-session&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// å¼•å…¥file-store</span>
<span class="token comment">// å› ä¸ºrequireå¼•è¿›æ¥çš„æ˜¯ä¸€ä¸ªå‡½æ•° (session)å°±ç›¸å½“äºç»™å‡½æ•°ä¼ äº†ä¸€ä¸ªå‚æ•°  </span>
<span class="token comment">// ä½ éœ€è¦å‘Šè¯‰ä½ å­˜å“ªä¸ªsession</span>
<span class="token keyword">const</span> FileStore <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;session-file-store&quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span>session<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">store</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">FileStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// pathç”¨æ¥æŒ‡å®šsessionæœ¬åœ°æ–‡ä»¶çš„è·¯å¾„</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./sessions&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// åŠ å¯†</span>
        <span class="token literal-property property">secret</span><span class="token operator">:</span> <span class="token string">&quot;å“ˆå“ˆ&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// sessionçš„æœ‰æ•ˆæ—¶é—´ ç§’ é»˜è®¤ä¸€ä¸ªå°æ—¶</span>
        <span class="token literal-property property">ttl</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token comment">// é»˜è®¤æƒ…å†µä¸‹ï¼ŒfileStoreä¼šæ¯é—´éš”ä¸€å°æ—¶ï¼Œæ¸…é™¤ä¸€æ¬¡sessionå¯¹è±¡</span>
        <span class="token comment">// reapInterval ç”¨æ¥æŒ‡å®šæ¸…é™¤sessioné—´éš”ï¼Œå•ä½ç§’ï¼Œé»˜è®¤1å°æ—¶</span>
         <span class="token literal-property property">reapInterval</span><span class="token operator">:</span> <span class="token number">10</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">secret</span><span class="token operator">:</span> <span class="token string">&quot;dazhaxie&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cookie</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">maxAge</span><span class="token operator">:</span> <span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">3600</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>sessionå­˜å‚¨ä¼šæœ‰å»¶è¿Ÿ</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å–ç”¨æˆ·çš„ç”¨æˆ·åå’Œå¯†ç </span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> username<span class="token punctuation">,</span> password <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>body
    <span class="token keyword">if</span> <span class="token punctuation">(</span>username <span class="token operator">===</span> <span class="token string">&quot;admin&quot;</span> <span class="token operator">&amp;&amp;</span> password <span class="token operator">===</span> <span class="token string">&quot;123123&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ç™»å½•æˆåŠŸåï¼Œå°†ç”¨æˆ·ä¿¡æ¯æ”¾å…¥åˆ°sessionä¸­</span>
        <span class="token comment">// è¿™é‡Œä»…ä»…æ˜¯å°†loginUseræ·»åŠ åˆ°äº†å†…å­˜ä¸­çš„sessionä¸­</span>
        <span class="token comment">// è€Œæ²¡æœ‰å°†å€¼å†™å…¥åˆ°æ–‡ä»¶ä¸­</span>
        req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>loginUser <span class="token operator">=</span> username

        <span class="token comment">//ä¸ºäº†ä½¿å¾—sessionå¯ä»¥ç«‹åˆ»å­˜å‚¨ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒç”¨save </span>
        req<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
            res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">&quot;/students/list&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_13-csrfæ”»å‡»" tabindex="-1"><a class="header-anchor" href="#_13-csrfæ”»å‡»" aria-hidden="true">#</a> 13.CSRFæ”»å‡»</h2><p>è·¨ç«™è¯·æ±‚ä¼ªé€ </p><p>ä¾‹å¦‚ï¼šæŸä¸ªæ ‡ç­¾é“¾æ¥ http://localhost:3000/students/delete?id=3</p><p>ç°åœ¨å¤§éƒ¨åˆ†çš„æµè§ˆå™¨éƒ½ä¸ä¼šåœ¨è·¨åŸŸçš„æƒ…å†µä¸‹è‡ªåŠ¨å‘é€<code>cookie</code>ï¼Œè¿™ä¸ªè®¾è®¡å°±æ˜¯ä¸ºäº†é¿å…csrfçš„æ”»å‡»ã€‚</p><ul><li><p>å¦‚ä½•è§£å†³ï¼Ÿ</p><ol><li>ä½¿ç”¨<code>referer</code>å¤´æ¥æ£€æŸ¥è¯·æ±‚çš„æ¥æºã€‚</li><li>ä½¿ç”¨éªŒè¯ç ã€‚</li><li>å°½é‡ä½¿ç”¨postè¯·æ±‚ï¼ˆç»“åˆtokenï¼‰</li></ol></li><li><p>tokenï¼ˆä»¤ç‰Œï¼‰</p><ul><li>å¯ä»¥åœ¨åˆ›å»ºè¡¨å•æ—¶éšæœºç”Ÿæˆä¸€ä¸ªä»¤ç‰Œ</li><li>ç„¶åå°†ä»¤ç‰Œå­˜å‚¨åˆ°sessionä¸­ï¼Œå¹¶é€šè¿‡æ¨¡æ¿å‘é€ç»™ç”¨æˆ·</li><li>ç”¨æˆ·æäº¤è¡¨å•æ—¶ï¼Œå¿…é¡»å°†tokenå‘å›ï¼Œæ‰å¯ä»¥è¿›è¡Œåç»­æ“ä½œ</li></ul></li></ul><p>ï¼ˆå¯ä»¥ä½¿ç”¨uuidæ¥ç”Ÿæˆtokenï¼‰<strong>yarn add uuid</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å¼•å…¥uuid</span>
<span class="token keyword">const</span> uuid <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;uuid&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>v4 <span class="token comment">//v4æ˜¯ç‰ˆæœ¬å·</span>
<span class="token comment">// å°†å®¢æˆ·ç«¯çš„tokenå’Œ sessionä¸­çš„tokenè¿›è¡Œæ¯”è¾ƒ</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>sessionToken<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> csrfToken<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token comment">//è¿™é‡Œå¯¹æ¯”å¯èƒ½ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜</span>
<span class="token comment">//å°±æ˜¯ä¸¤ä¸ªå­—ç¬¦ä¸²æ‰“å°å‡ºæ¥æ˜æ˜ä¸€æ ·ï¼Œä½†å°±æ˜¯ä¸ç›¸ç­‰ï¼ŒæŸ¥äº†ä»¥åå‘ç°ï¼š</span>
<span class="token comment">//æœ‰äº›ç‰¹æ®Šå­—ç¬¦æ˜¯ä¸æ˜¾ç¤ºçš„ï¼ˆ%20ç©ºæ ¼ï¼‰ã€‚é€šè¿‡encodeURIComponentï¼ˆstrï¼‰æ“ä½œå°±èƒ½çœ‹è§</span>
<span class="token comment">//è§£å†³åŠæ³•ï¼š a.trim() === b.trim() å»é™¤é¦–å°¾ç©ºæ ¼</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,57);function w(_,j){const a=i("ExternalLinkIcon");return o(),c("div",null,[u,n("p",null,[s("ä»€ä¹ˆæ˜¯expressï¼Ÿexpress æ˜¯nodeä¸­çš„æœåŠ¡å™¨è½¯ä»¶ã€‚å®˜ç½‘åœ°å€ï¼š"),n("a",r,[s("Express å®˜æ–¹ä¸­æ–‡ç½‘ (nodejs.cn)"),t(a)]),s("å…¶å®åªæœ‰éƒ¨åˆ†æ±‰åŒ– "),n("a",k,[s("Express ä¸­æ–‡ç½‘ (nodejs.cn)"),t(a)])]),d,n("p",null,[s("expressä¸­çš„ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶ "),n("a",v,[s("body-parser - npm (npmjs.com)"),t(a)])]),m,n("ul",null,[n("li",null,[n("a",b,[s("Application-level middleware åº”ç”¨çº§ä¸­é—´ä»¶"),t(a)])]),n("li",null,[n("a",g,[s("Router-level middleware è·¯ç”±å™¨çº§ä¸­é—´ä»¶"),t(a)])]),n("li",null,[n("a",q,[s("Error-handling middleware é”™è¯¯å¤„ç†ä¸­é—´ä»¶"),t(a)])]),n("li",null,[n("a",h,[s("Built-in middleware å†…ç½®ä¸­é—´ä»¶"),t(a)]),s(),f]),n("li",null,[n("a",x,[s("Third-party middleware ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶"),t(a)]),s(" ä¾‹å¦‚ï¼šbody-parser")])]),y])}const P=e(l,[["render",w],["__file","express.html.vue"]]);export{P as default};
